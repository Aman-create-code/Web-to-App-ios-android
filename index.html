<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nexus Engine v3.1 | Enterprise Builder</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap');
        body { background: #050505; color: #f8fafc; font-family: 'Inter', sans-serif; }
        .neon-border { border: 1px solid rgba(6, 182, 212, 0.2); box-shadow: 0 0 20px rgba(6, 182, 212, 0.05); }
        .console-font { font-family: 'JetBrains Mono', monospace; }
        .glass { background: rgba(15, 23, 42, 0.8); backdrop-filter: blur(15px); }
    </style>
</head>
<body class="p-4 md:p-8">

    <div class="max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-12 gap-8">
        
        <div class="lg:col-span-4 space-y-6 order-2 lg:order-1">
            <div class="glass p-6 rounded-3xl neon-border">
                <h3 class="text-xs font-black text-cyan-500 uppercase tracking-[0.2em] mb-4">System Monitor</h3>
                <div id="logConsole" class="h-80 overflow-y-auto console-font text-[10px] space-y-1 text-slate-400">
                    <p class="text-cyan-400 font-bold">[SYSTEM] Engine initialized...</p>
                </div>
            </div>
            
            <div class="glass p-6 rounded-3xl border border-slate-800">
                <h3 class="text-xs font-black text-slate-500 uppercase mb-4 tracking-widest">Build Stats</h3>
                <div class="grid grid-cols-2 gap-4">
                    <div class="bg-slate-900/50 p-3 rounded-xl border border-slate-800">
                        <p class="text-[10px] text-slate-500">Java Version</p>
                        <p class="text-sm font-bold">21 (LTS)</p>
                    </div>
                    <div class="bg-slate-900/50 p-3 rounded-xl border border-slate-800">
                        <p class="text-[10px] text-slate-500">Capacitor</p>
                        <p class="text-sm font-bold">v7.0</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="lg:col-span-8 space-y-6 order-1 lg:order-2">
            
            <div class="glass p-8 rounded-[2.5rem] neon-border">
                <div class="flex flex-col md:flex-row gap-6">
                    <div class="flex-1">
                        <label class="text-[10px] font-black text-slate-500 uppercase ml-2">GitHub Personal Token</label>
                        <input type="password" id="ghToken" class="w-full bg-slate-950 border border-slate-800 rounded-2xl p-4 mt-1 text-cyan-400 focus:border-cyan-500 outline-none transition-all" placeholder="ghp_xxxxxxxx">
                    </div>
                    <div class="flex-1">
                        <label class="text-[10px] font-black text-slate-500 uppercase ml-2">Repo (User/Repo)</label>
                        <input type="text" id="ghRepo" class="w-full bg-slate-950 border border-slate-800 rounded-2xl p-4 mt-1 focus:border-cyan-500 outline-none transition-all" placeholder="Aman/MyRepo">
                    </div>
                </div>
            </div>

            <div class="glass p-8 rounded-[2.5rem] border border-slate-800 space-y-8">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="space-y-4">
                        <h4 class="font-bold flex items-center gap-2"><i data-lucide="globe" class="w-4 h-4"></i> Connectivity</h4>
                        <input type="url" id="targetUrl" class="w-full bg-slate-950 border border-slate-800 rounded-xl p-3 text-sm" placeholder="https://app.deinseite.de">
                        <input type="text" id="appName" class="w-full bg-slate-950 border border-slate-800 rounded-xl p-3 text-sm" placeholder="App Name (Display)">
                    </div>

                    <div class="space-y-4">
                        <h4 class="font-bold flex items-center gap-2"><i data-lucide="shield" class="w-4 h-4"></i> Permissions</h4>
                        <div class="grid grid-cols-2 gap-2">
                            <button onclick="toggleF('mic')" id="btn-mic" class="p-3 bg-slate-950 border border-slate-800 rounded-xl text-[10px] font-bold uppercase transition-all">Mic</button>
                            <button onclick="toggleF('cam')" id="btn-cam" class="p-3 bg-slate-950 border border-slate-800 rounded-xl text-[10px] font-bold uppercase transition-all">Cam</button>
                            <button onclick="toggleF('gps')" id="btn-gps" class="p-3 bg-slate-950 border border-slate-800 rounded-xl text-[10px] font-bold uppercase transition-all">GPS</button>
                            <button onclick="toggleF('notif')" id="btn-notif" class="p-3 bg-slate-950 border border-slate-800 rounded-xl text-[10px] font-bold uppercase transition-all">Push</button>
                        </div>
                    </div>
                </div>

                <div class="pt-6 border-t border-slate-800 grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div>
                        <label class="text-[10px] font-black text-slate-500 uppercase">Theme Color</label>
                        <input type="color" id="appColor" value="#06b6d4" class="w-full h-10 mt-2 bg-transparent border-none cursor-pointer">
                    </div>
                    <div class="md:col-span-2">
                        <label class="text-[10px] font-black text-slate-500 uppercase">Orientation Mode</label>
                        <select id="appOrient" class="w-full bg-slate-950 border border-slate-800 rounded-xl p-2 mt-2 text-sm outline-none">
                            <option value="portrait">Standard (Portrait)</option>
                            <option value="landscape">Landscape Only</option>
                            <option value="any">Sensor Based (Autorotate)</option>
                        </select>
                    </div>
                </div>
            </div>

            <button onclick="runNexusBuild()" id="mainBtn" class="w-full py-8 bg-gradient-to-r from-cyan-600 to-blue-700 rounded-[2rem] font-black text-2xl tracking-tighter hover:brightness-125 active:scale-[0.98] transition-all flex items-center justify-center gap-4">
                <i data-lucide="zap" class="fill-current"></i> COMPILE & DEPLOY
            </button>
        </div>
    </div>

    <script>
        lucide.createIcons();
        let features = { mic: false, cam: false, gps: false, notif: false };

        // Auto-Load Token
        document.getElementById('ghToken').value = localStorage.getItem('nexus_token') || '';
        document.getElementById('ghRepo').value = localStorage.getItem('nexus_repo') || '';

        function addLog(msg, color = 'text-slate-400') {
            const con = document.getElementById('logConsole');
            const time = new Date().toLocaleTimeString();
            con.innerHTML += `<p class="${color}">[${time}] ${msg}</p>`;
            con.scrollTop = con.scrollHeight;
        }

        function toggleF(id) {
            features[id] = !features[id];
            const b = document.getElementById('btn-' + id);
            b.classList.toggle('border-cyan-500');
            b.classList.toggle('text-cyan-400');
            addLog(`Permission ${id.toUpperCase()} set to ${features[id]}`);
        }

        async function runNexusBuild() {
            const btn = document.getElementById('mainBtn');
            const token = document.getElementById('ghToken').value;
            const repo = document.getElementById('ghRepo').value;

            if(!token || !repo) return alert("Fehlende API-Daten!");
            
            localStorage.setItem('nexus_token', token);
            localStorage.setItem('nexus_repo', repo);

            btn.disabled = true;
            addLog("Connecting to GitHub API...", "text-yellow-500");

            try {
                const res = await fetch(`https://api.github.com/repos/${repo}/dispatches`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${token}`,
                        'Accept': 'application/vnd.github.v3+json'
                    },
                    body: JSON.stringify({
                        event_type: "nexus_build_trigger",
                        client_payload: {
                            url: document.getElementById('targetUrl').value,
                            name: document.getElementById('appName').value || "NexusApp",
                            orientation: document.getElementById('appOrient').value,
                            color: document.getElementById('appColor').value,
                            perms: features
                        }
                    })
                });

                if(res.ok) {
                    addLog("BUILD COMMAND ACCEPTED! Check GitHub Actions.", "text-green-500 font-bold");
                } else {
                    const errorData = await res.json();
                    addLog(`API ERROR: ${errorData.message}`, "text-red-500");
                }
            } catch (e) {
                addLog("CRITICAL: Connection refused.", "text-red-600");
            }
            btn.disabled = false;
        }
    </script>
</body>
</html>
